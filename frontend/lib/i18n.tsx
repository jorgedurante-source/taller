'use client';

import React, { createContext, useContext, useState, useEffect } from 'react';

export type Language = 'en' | 'es';

type Translations = {
    [key: string]: {
        en: string;
        es: string;
    };
};

export const translations: Translations = {
    // Navigation
    dashboard: { en: 'Dashboard', es: 'Panel Principal' },
    clients: { en: 'Clients', es: 'Clientes' },
    vehicles: { en: 'Vehicles', es: 'Veh칤culos' },
    orders: { en: 'Orders', es: '칍rdenes' },
    income: { en: 'Income', es: 'Ingresos' },
    settings: { en: 'Settings', es: 'Ajustes' },
    users: { en: 'Users', es: 'Usuarios' },
    roles: { en: 'Roles', es: 'Roles' },
    reminders: { en: 'Reminders', es: 'Recordatorios' },
    appointments: { en: 'Appointments', es: 'Turnos' },
    suppliers: { en: 'Suppliers', es: 'Proveedores' },
    logout: { en: 'Logout', es: 'Cerrar Sesi칩n' },
    order: { en: 'Order', es: 'Orden' },
    client_portal: { en: 'Customer Portal', es: 'Portal de Clientes' },

    // Orders Status
    pending: { en: 'Pending', es: 'Pendiente' },
    Pendiente: { en: 'Pending', es: 'Pendiente' },
    quoted: { en: 'Quoted', es: 'Presupuestado' },
    Presupuestado: { en: 'Quoted', es: 'Presupuestado' },
    approved: { en: 'Approved', es: 'Aprobado' },
    Aprobado: { en: 'Approved', es: 'Aprobado' },
    ready: { en: 'Ready for delivery', es: 'Listo para retiro' },
    'Listo para entrega': { en: 'Ready for delivery', es: 'Listo para retiro' },
    'Listo para retiro': { en: 'Ready for delivery', es: 'Listo para retiro' },
    delivered: { en: 'Delivered', es: 'Entregado' },
    Entregado: { en: 'Delivered', es: 'Entregado' },
    cancelled: { en: 'Cancelled', es: 'Cancelado' },
    Cancelado: { en: 'Cancelled', es: 'Cancelado' },
    appointment: { en: 'Appointment Assigned', es: 'Turno Asignado' },
    'En proceso': { en: 'In Process', es: 'En proceso' },
    'En reparaci칩n': { en: 'In Repair', es: 'En reparaci칩n' },
    'En Reparaci칩n': { en: 'In Repair', es: 'En reparaci칩n' },
    'Esperando Repuestos': { en: 'Waiting for Parts', es: 'Esperando Repuestos' },
    'Esperando repuestos': { en: 'Waiting for Parts', es: 'Esperando Repuestos' },
    'Respuesta Recibida': { en: 'Response Received', es: 'Respuesta Recibida' },
    'Respuesta Enviada': { en: 'Response Sent', es: 'Respuesta Enviada' },
    'Turno Asignado': { en: 'Appointment Assigned', es: 'Turno Asignado' },
    'Turno asignado': { en: 'Appointment Assigned', es: 'Turno asignado' },
    in_progress: { en: 'In Process', es: 'En proceso' },
    waiting_parts: { en: 'Waiting for Parts', es: 'Esperando Repuestos' },
    consult_parts: { en: 'Consult Budget', es: 'Consultar Presupuesto' },
    rights_reserved: { en: 'All rights reserved.', es: 'Todos los derechos reservados.' },

    // Payment Status
    unpaid: { en: 'Unpaid', es: 'Sin cobrar' },
    paid: { en: 'Paid', es: 'Cobrado' },
    partial: { en: 'Partial', es: 'Parcial' },

    // Order Management
    orders_management: { en: 'Orders Management', es: 'Gesti칩n de 칍rdenes' },
    orders_description: { en: 'Workshop work orders', es: '칍rdenes de trabajo del taller' },
    new_order: { en: 'New Order', es: 'Nueva Orden' },
    search_orders_placeholder: { en: 'Search by client, plate, model or status...', es: 'Buscar por cliente, patente, modelo o estado...' },
    history_delivered: { en: 'Delivered (History)', es: 'Entregadas (Historial)' },
    unread_only: { en: 'Unread only', es: 'Solo no le칤dos' },
    no_orders: { en: 'No orders found', es: 'No hay 칩rdenes para mostrar' },
    loading_orders: { en: 'Loading orders...', es: 'Cargando 칩rdenes...' },
    order_details: { en: 'Order Details', es: 'Detalles de la Orden' },
    total_order: { en: 'Order Total', es: 'Total orden' },

    // Dashboard Items
    welcome: { en: 'Hello', es: 'Hola' },
    create_order: { en: 'New Order', es: 'Nueva Orden' },
    active_orders: { en: 'Active Orders', es: '칍rdenes Activas' },
    new_clients: { en: 'New Clients', es: 'Clientes Nuevos' },
    waiting_budget: { en: 'Waiting Budget', es: 'Esperando Presupuesto' },
    assigned_appointments: { en: 'Assigned Appointments', es: 'Turnos Asignados' },
    new_messages: { en: 'New Messages', es: 'Mensajes Nuevos' },
    ready_for_delivery: { en: 'Ready for delivery', es: 'Listos para entrega' },
    workshop_status: { en: 'Workshop Status', es: 'Estado del Taller' },
    common_services: { en: 'Common Services', es: 'Servicios frecuentes' },
    tracking: { en: 'Tracking', es: 'Seguimientos' },

    units_in_workshop: { en: 'Units in workshop', es: 'Unidades en taller' },
    income_and_reports: { en: 'Income and reports', es: 'Ingresos y reportes' },
    preventive_maintenance: { en: 'Preventive maintenance', es: 'Mantenimiento preventivo' },
    workshop_configuration: { en: 'Workshop configuration', es: 'Configuraci칩n taller' },
    work_in_progress: { en: 'Work in progress', es: 'Trabajos en curso' },
    registered_this_month: { en: 'Registered this month', es: 'Registrados este mes' },
    new_budgets: { en: 'New budgets', es: 'Nuevos presupuestos' },
    scheduled_appointments: { en: 'Scheduled appointments', es: 'Citas programadas' },
    unread_replies: { en: 'Unread replies', es: 'Respuestas sin leer' },
    finished_vehicles: { en: 'Finished vehicles', es: 'Veh칤culos terminados' },
    restricted_panel: { en: 'Restricted Panel', es: 'Panel Restringido' },
    restricted_panel_desc: { en: 'Your current plan or user role does not have the statistics and Control Panel module enabled.', es: 'Tu plan actual o el rol de tu usuario no tiene habilitado el m칩dulo de estad칤sticas y Panel de Control.' },
    try_again: { en: 'Try again', es: 'Volver a intentar' },

    // General Actions
    save: { en: 'Save', es: 'Guardar' },
    cancel: { en: 'Cancel', es: 'Cancelar' },
    delete: { en: 'Delete', es: 'Eliminar' },
    edit: { en: 'Edit', es: 'Editar' },
    view: { en: 'View', es: 'Ver' },
    create: { en: 'Create', es: 'Crear' },
    search: { en: 'Search', es: 'Buscar' },
    actions: { en: 'Actions', es: 'Acciones' },
    loading: { en: 'Loading...', es: 'Cargando...' },
    success: { en: 'Success', es: '칄xito' },
    error: { en: 'Error', es: 'Error' },

    operational_summary: { en: 'Operational summary of', es: 'Resumen operativo de' },
    details: { en: 'Details', es: 'Detalles' },

    // Stats
    total_orders: { en: 'Total Orders', es: 'Total de 칍rdenes' },
    total_clients: { en: 'Total Clients', es: 'Total de Clientes' },
    monthly_income: { en: 'Monthly Income', es: 'Ingresos Mensuales' },
    active_vehicles: { en: 'Active Vehicles', es: 'Veh칤culos Activos' },
    financial_analysis: { en: 'Financial Analysis', es: 'An치lisis Financiero' },
    cash_control: { en: 'Cash control and projections', es: 'Control de caja y proyecciones' },
    hide_figures: { en: 'Hide Figures', es: 'Ocultar Cifras' },
    show_figures: { en: 'Show Figures', es: 'Mostrar Cifras' },
    historical_total_income: { en: 'Historical Total Income', es: 'Ingreso Total Hist칩rico' },
    net_labor: { en: 'Net (Labor)', es: 'Neto (Mano Obra)' },
    monthly_average: { en: 'Monthly Average', es: 'Promedio Mensual' },
    view_payment_history: { en: 'View payment history', es: 'Ver historial de cobros' },
    ready_for_collection: { en: 'Ready for collection', es: 'Listas para cobro' },
    units_list: { en: 'Units list', es: 'Listado de unidades' },
    daily_billing: { en: 'DAILY BILLING', es: 'FACTURACI칍N DIARIA' },
    daily_flow_detail: { en: 'Daily flow detail', es: 'Detalle del flujo por jornada' },
    month_total: { en: 'Month total:', es: 'Total del mes:' },
    monthly_history: { en: 'MONTHLY HISTORY', es: 'HIST칍RICO MENSUAL' },
    advanced_reports: { en: 'Advanced Reports', es: 'Reportes Avanzados' },
    explore_metrics: { en: 'Explore detailed metrics and interactive charts.', es: 'Explora m칠tricas detalladas y gr치ficas interactivas.' },
    orders_by_status: { en: 'Orders by Status', es: '칍rdenes por Estado' },

    // Reports & Analytics
    reports: { en: 'Reports', es: 'Reportes' },
    reports_desc: { en: 'Advanced metrics and insights', es: 'M칠tricas e informaci칩n avanzada' },
    lead_time: { en: 'Lead Time (Days)', es: 'Tiempo de Reparaci칩n (D칤as)' },
    profit_breakdown: { en: 'Profit Breakdown', es: 'Ganancia Repuestos vs Mano Obra' },
    customer_retention: { en: 'Customer Retention', es: 'Retenci칩n de Clientes' },
    top_mechanics: { en: 'Top Techs', es: 'Ranking de Mec치nicos' },

    // Data Tools
    data_tools: { en: 'Data Tools', es: 'Herramientas de Datos' },
    wipe_operational: { en: 'Wipe Operational Data', es: 'Borrar Datos Operativos' },
    wipe_users: { en: 'Wipe Users & Roles', es: 'Borrar Usuarios y Roles' },
    wipe_templates: { en: 'Wipe Templates', es: 'Borrar Plantillas' },
    seed_operational: { en: 'Seed Operational Data', es: 'Generar Clientes y 칍rdenes' },
    seed_users: { en: 'Seed Mechanics', es: 'Generar Mec치nico' },
    seed_templates: { en: 'Restore Templates', es: 'Restaurar Mensajes' },
    top_customers: { en: 'Top Customers', es: 'Top Clientes' },
    most_frequent_services: { en: 'Most Frequent Services', es: 'Servicios m치s realizados' },
    loading_stats: { en: 'Loading Statistics...', es: 'Cargando Estad칤sticas...' },
    orders_completed: { en: 'orders completed', es: '칩rdenes completadas' },
    dev_mode_only: { en: 'DEV MODE ONLY', es: 'SOLO MODO DESARROLLO' },
    clear_operations: { en: 'Clear Operations', es: 'Operaciones de Limpieza' },
    seed_operations: { en: 'Seed Operations', es: 'Operaciones de Generaci칩n' },
    confirm_clear_data: { en: 'ARE YOU SURE? This will delete all operational data (orders, clients, etc.). This cannot be undone.', es: '쮼ST츼S SEGURO? Esto borrar치 todos los datos operativos (칩rdenes, clientes, etc.). Esta acci칩n no se puede deshacer.' },
    confirm_seed_data: { en: 'Seed test data? This will add fake orders and clients for testing purposes.', es: '쮾enerar datos de prueba? Esto agregar치 칩rdenes y clientes ficticios para pruebas.' },
    operation_success: { en: 'Operation completed successfully', es: 'Operaci칩n completada con 칠xito' },
    global: { en: 'Global', es: 'Global' },
    veh: { en: 'VEH.', es: 'VEH.' },
    loading_app: { en: 'Loading', es: 'Cargando' },
    select_workshop: { en: 'Select Workshop', es: 'Seleccionar Taller' },
    central_panel: { en: 'Central Panel', es: 'Panel Central' },
    support: { en: 'Support', es: 'Soporte' },
    dev_environment: { en: 'Development Environment', es: 'Entorno de Desarrollo' },
    dev_data_warning: { en: 'Seeded data is fictional and for testing purposes only', es: 'Los datos sembrados son ficticios y solo para pruebas' },
    dev_mode: { en: 'Dev Mode', es: 'Modo Dev' },
    client_profile: { en: 'Client Profile', es: 'Ficha de Cliente' },
    mechhub_record: { en: 'MechHub Record', es: 'Expediente MechHub' },
    reset_pass: { en: 'Reset Pass', es: 'Resetear Pass' },
    edit_profile: { en: 'Edit Profile', es: 'Editar Perfil' },
    internal_notes: { en: 'Internal Notes', es: 'Notas Internas' },
    no_client_notes: { en: 'No special notes for this client.', es: 'Sin notas especiales para este cliente.' },
    add_vehicle: { en: 'Add Vehicle', es: 'Agregar Veh칤culo' },
    active: { en: 'Active', es: 'Activo' },
    inactive: { en: 'Inactive', es: 'Inactivo' },
    delete_vehicle: { en: 'Delete Vehicle', es: 'Eliminar Veh칤culo' },
    no_registered_vehicles: { en: 'No registered vehicles', es: 'No hay veh칤culos registrados' },
    no_description: { en: 'No description', es: 'Sin descripci칩n' },
    no_registered_orders: { en: 'No registered orders', es: 'No hay 칩rdenes registradas' },
    save_changes: { en: 'Save Changes', es: 'Guardar Cambios' },
    enter_new_pass: { en: 'Enter new pass...', es: 'Ingrese nueva pass...' },
    update_access: { en: 'Update Access', es: 'Actualizar Acceso' },
    new_vehicle: { en: 'New Vehicle', es: 'Nuevo Veh칤culo' },
    register_vehicle: { en: 'Register Vehicle', es: 'Registrar Veh칤culo' },
    send_message: { en: 'Send Message', es: 'Enviar Mensaje' },
    to_contact_label: { en: 'To', es: 'Para' },
    no_manual_templates: { en: 'No manual templates configured.', es: 'No hay plantillas manuales configuradas.' },
    manage_templates_settings: { en: 'Manage Templates in Settings', es: 'Gestionar Plantillas en Ajustes' },
    client_not_found: { en: 'Client not found', es: 'Cliente no encontrado' },


    // Statuses (English Keys)
    inwork: { en: 'In Work', es: 'En Trabajo' },
    in_repair: { en: 'In Repair', es: 'En Reparaci칩n' },
    response_received: { en: 'Response Received', es: 'Respuesta Recibida' },
    response_sent: { en: 'Response Sent', es: 'Respuesta Enviada' },

    // Order Management Detailed
    service_detail: { en: 'Service Detail', es: 'Detalle del Servicio' },
    labor: { en: 'Labor', es: 'Mano de Obra' },
    parts: { en: 'Parts', es: 'Repuestos' },
    parts_profit: { en: 'Parts Profit', es: 'Gan. Repuestos' },
    estimated_total: { en: 'Estimated Total', es: 'Total Estimado' },
    no_items_loaded: { en: 'No items loaded', es: 'Sin items cargados' },
    notify_email: { en: 'Notify Email', es: 'Notificar Email' },
    share: { en: 'Share', es: 'Compartir' },
    status_updated_successfully: { en: 'Status updated successfully', es: 'Estado actualizado correctamente' },
    error_updating_status: { en: 'Error updating status', es: 'Error al actualizar estado' },
    status_changed_to: { en: 'Status changed to', es: 'Cambio de estado a' },
    order_created_history: { en: 'Work order created', es: 'Orden de trabajo creada' },
    budget_generated_history: { en: 'Budget generated for a total of', es: 'Presupuesto generado por un total de' },
    payment_amount_history: { en: 'Amount paid', es: 'Monto cobrado' },
    reminder_scheduled_for: { en: 'Reminder scheduled for', es: 'Recordatorio programado para el' },
    order_not_found: { en: 'Order not found', es: 'Orden no encontrada' },
    item_deleted: { en: 'Item deleted', es: 'Item eliminado' },
    item_updated: { en: 'Item updated', es: 'Item actualizado' },
    items_added: { en: 'Items added to order', es: 'Items agregados a la orden' },
    confirm_delete_item: { en: 'Delete this item?', es: '쮼liminar este item?' },
    clients_management: { en: 'Clients Management', es: 'Gesti칩n de Clientes' },
    vehicles_base: { en: 'Vehicles Base', es: 'Base de Veh칤culos' },
    loading_database: { en: 'Loading database...', es: 'Cargando base de datos...' },
    no_clients_found: { en: 'No clients found', es: 'No se encontraron clientes' },
    no_vehicles_found: { en: 'No vehicles found', es: 'No se encontraron veh칤culos' },
    new_client: { en: 'New Client', es: 'Nuevo Cliente' },
    client_registered_success: { en: 'Client registered successfully', es: 'Cliente registrado exitosamente' },
    personal_data: { en: 'Personal Data', es: 'Datos Personales' },
    nickname_optional: { en: 'Nickname (Optional)', es: 'Apodo (Opcional)' },
    main_vehicle: { en: 'Main Vehicle', es: 'Veh칤culo Principal' },
    link_vehicle: { en: 'Link Vehicle', es: 'Vincular Veh칤culo' },
    register_client: { en: 'Register Client', es: 'Registrar Cliente' },
    plate: { en: 'Plate', es: 'Patente' },
    brand: { en: 'Brand', es: 'Marca' },
    model: { en: 'Model', es: 'Modelo' },
    km: { en: 'KM', es: 'KM' },
    search_clients_placeholder: { en: 'Search by name, nickname, phone or email...', es: 'Buscar por nombre, apodo, tel칠fono o email...' },
    search_vehicles_placeholder: { en: 'Search by brand, model, plate or owner...', es: 'Buscar por marca, modelo, patente o due침o...' },
    global_technical_file: { en: 'Global Technical File', es: 'Legajo t칠cnico global' },
    loading_fleet: { en: 'Loading fleet...', es: 'Cargando parque automotor...' },
    history: { en: 'History', es: 'Historial' },

    // Communication Center
    messaging_center: { en: 'Messaging Center', es: 'Centro de Mensajer칤a' },
    unread: { en: 'UNREAD', es: 'NO LE칈DO' },
    click_to_expand: { en: 'Click to expand conversations', es: 'Cliquear para expandir conversaciones' },
    click_to_collapse: { en: 'Click to collapse', es: 'Cliquear para colapsar' },
    select_contact_chat: { en: 'Select a contact to read the conversation', es: 'Selecciona un contacto para leer la conversaci칩n' },
    chat_with: { en: 'Chat with', es: 'Chat con' },
    reply: { en: 'Reply', es: 'Responder' },
    sending: { en: 'Sending...', es: 'Enviando...' },
    send_reply: { en: 'Send Reply', es: 'Enviar Respuesta' },
    reply_placeholder: { en: 'Type your reply here...', es: 'Escribe tu respuesta aqu칤...' },

    // Timeline & History
    order_history: { en: 'Order History', es: 'Historial de la Orden' },
    private: { en: 'Private', es: 'Privado' },
    direct_reply_supplier: { en: 'Direct reply to supplier', es: 'Respuesta directa al proveedor' },

    // Sidebar & Process
    process_management: { en: 'Process Management', es: 'Gesti칩n de Proceso' },
    new_status: { en: 'New Status', es: 'Nuevo Estado' },
    status_notes: { en: 'Status Notes', es: 'Notas del Cambio' },
    update_status: { en: 'Update Status', es: 'Actualizar Estado' },
    updating: { en: 'Updating...', es: 'Actualizando...' },
    reminder_in: { en: 'Reminder in...', es: 'Recordar en...' },
    no_reminder: { en: 'No reminder', es: 'Sin recordatorio' },
    assign_appointment: { en: 'Assign Appointment', es: 'Asignar Turno' },
    date: { en: 'Date', es: 'Fecha' },
    time: { en: 'Time', es: 'Hora' },
    select_time: { en: 'Select time', es: 'Seleccionar hora' },
    appointment_notification_hint: { en: 'Upon saving, the client will be notified automatically if the template is active.', es: 'Al guardar, se le notificar치 al cliente autom치ticamente si la plantilla est치 activa.' },

    // Payment Panel
    payment: { en: 'Payment', es: 'Cobro' },
    payment_status: { en: 'Payment Status', es: 'Estado de cobro' },
    amount_paid: { en: 'Amount Paid', es: 'Monto cobrado' },
    total: { en: 'Total', es: 'Total' },
    save_payment: { en: 'Save Payment', es: 'Guardar Cobro' },
    payment_updated: { en: 'Payment information updated', es: 'Informaci칩n de cobro actualizada' },
    full_payment: { en: 'Full Payment', es: 'Cobrado completo' },
    partial_payment: { en: 'Partial Payment', es: 'Cobro parcial' },

    // Customer & Vehicle
    customer_data: { en: 'Customer Data', es: 'Datos del Cliente' },
    vehicle: { en: 'Vehicle', es: 'Veh칤culo' },
    no_photo: { en: 'NO PHOTO', es: 'SIN FOTO' },
    year: { en: 'Year', es: 'A침o' },
    view_full_history: { en: 'View full history', es: 'Ver historial completo' },

    // Modals
    add_items: { en: 'Add Items', es: 'Agregar Items' },
    order_extension: { en: 'Order Extension', es: 'Ampliaci칩n de Orden' },
    catalog_service: { en: 'Catalog Service', es: 'Servicio Cat치logo' },
    custom_item: { en: 'Custom Item', es: '-- Personalizado --' },
    add_another_item: { en: '+ Add another Item', es: '+ Agregar otro Item' },
    confirm_and_extend: { en: 'Confirm and Extend Order', es: 'Confirmar y Ampliar Orden' },
    internal_profit: { en: 'Internal Profit ($)', es: 'Ganancia Interna ($)' },
    final_budget: { en: 'Final Budget', es: 'Presupuesto Final' },
    subject_to_changes: { en: 'Subject to workshop changes', es: 'Sujeto a cambios del taller' },
    error_generating_pdf: { en: 'Error generating PDF', es: 'Error al generar PDF' },
    email_sent_successfully: { en: 'Email sent successfully', es: 'Email enviado correctamente' },
    error_sending_email: { en: 'Error sending email', es: 'Error al enviar email' },
    error_sending_response: { en: 'Error sending response', es: 'Error al enviar respuesta' },
    by: { en: 'by', es: 'por' },
    part_inquiries: { en: 'Part Inquiries', es: 'Consultas de Repuestos' },
    supplier_order_history: { en: 'Supplier Order History', es: 'Historial de pedidos a proveedores' },
    message_sent: { en: 'Message sent', es: 'Mensaje enviado' },
    last: { en: 'Last', es: '칔ltimo' },
    new_singular: { en: 'new', es: 'nuevo' },
    new_plural: { en: 'new', es: 'nuevos' },
    replying_to: { en: 'Replying to', es: 'Respondiendo a' },
    send_direct_reply: { en: 'Send Direct Reply', es: 'Enviar Respuesta Directa' },
    error_saving_reminder: { en: 'Error saving reminder', es: 'Error al guardar recordatorio' },
    total_amount: { en: 'Total Amount', es: 'Monto Total' },

    // Settings Specific
    personal_settings: { en: 'Personal Settings', es: 'Ajustes Personales' },
    workshop_settings: { en: 'Workshop Settings', es: 'Ajustes del Taller' },
    global_config: { en: 'Global Configuration', es: 'Configuraci칩n Global' },
    portal_config: { en: 'Portal & Communication', es: 'Portal y Comunicaci칩n' },
    theme_selection: { en: 'Theme & Appearance', es: 'Tema y Apariencia' },
    taxes_and_billing: { en: 'Taxes & Billing', es: 'Impuestos y Calidad' },
    notifications_config: { en: 'Notifications', es: 'Notificaciones' },
    user_management: { en: 'User Management', es: 'Gesti칩n de Usuarios' },
    roles_and_perms: { en: 'Roles & Permissions', es: 'Roles y Permisos' },
    services_catalog: { en: 'Services Catalog', es: 'Cat치logo de Servicios' },
    audit_logs: { en: 'Audit Logs', es: 'Registros de Auditor칤a' },
    smtp_config: { en: 'SMTP Configuration', es: 'Configuraci칩n SMTP' },
    imap_config: { en: 'IMAP Configuration', es: 'Configuraci칩n IMAP' },
    client_portal_language: { en: 'Client Portal Language', es: 'Idioma Portal del Cliente' },
    language_personal: { en: 'App Language', es: 'Idioma de la App' },
    profile_updated: { en: 'Profile updated successfully', es: 'Perfil actualizado correctamente' },
    error_updating_profile: { en: 'Error updating profile', es: 'Error al actualizar perfil' },
    first_name: { en: 'First Name', es: 'Nombre' },
    last_name: { en: 'Last Name', es: 'Apellido' },
    change_password_hint: { en: 'Leave blank to keep current password', es: 'Dejar en blanco para mantener la contrase침a actual' },
    new_password: { en: 'New Password', es: 'Nueva Contrase침a' },

    // Public Portal
    consulting_status: { en: 'Checking repair status...', es: 'Consultando estado de reparaci칩n...' },
    order_not_found_portal: { en: 'Order not found or invalid token.', es: 'La orden no existe o el token es inv치lido.' },
    retry: { en: 'Retry', es: 'Reintentar' },
    repair_tracking: { en: 'Repair Tracking', es: 'Seguimiento de Reparaci칩n' },
    updated: { en: 'Updated', es: 'Actualizado' },
    appointment_date_portal: { en: 'Your Appointment Date', es: 'Fecha de tu Turno' },
    see_you_there: { en: 'We look forward to seeing you at the workshop!', es: '춰Te esperamos en el taller!' },
    date_to_be_confirmed: { en: 'To be confirmed', es: 'Fecha a confirmar' },
    detailed_work: { en: 'Detailed Work', es: 'Trabajos Detallados' },
    timeline: { en: 'Timeline', es: 'Cronolog칤a' },
    talk_to_workshop: { en: 'Talk to Workshop', es: 'Hablar con el taller' },
    powered_by: { en: 'Powered by', es: 'Potenciado por' },
    no_address: { en: 'No address registered', es: 'Sin direcci칩n registrada' },
    no_phone: { en: 'No phone registered', es: 'Sin tel칠fono' },

    // Portal Steps
    step_received: { en: 'Received', es: 'Recibido' },
    step_appointment: { en: 'Appointment', es: 'Turno' },
    step_approved: { en: 'Approved', es: 'Aprobado' },
    step_repairing: { en: 'Repairing', es: 'En Reparaci칩n' },
    step_ready: { en: 'Ready for delivery', es: 'Listo para retiro' },
    step_delivered: { en: 'Delivered', es: 'Entregado' },

    // Client Login Page
    welcome_to: { en: 'Welcome to', es: 'Bienvenido a' },
    excellence_automotive: { en: 'Excellence in Automotive Service', es: 'Excelencia en Servicio Automotriz' },
    location: { en: 'Location', es: 'Ubicaci칩n' },
    business_hours_title: { en: 'Business Hours', es: 'Horarios de Atenci칩n' },
    mon_fri_label: { en: 'Monday to Friday', es: 'Lunes a Viernes' },
    sat_label: { en: 'Saturdays', es: 'S치bados' },
    sun_label: { en: 'Sundays', es: 'Domingos' },
    direct_contact: { en: 'Direct Contact', es: 'Contacto Directo' },
    follow_us: { en: 'Follow us on social media', es: 'Seguinos en redes' },
    client_portal_title: { en: 'Customer Portal', es: 'Portal Clientes' },
    manage_vehicles_desc: { en: 'Manage your vehicles and services', es: 'Gestion치 tus veh칤culos y servicios' },
    your_email: { en: 'Your Email', es: 'Tu Email' },
    password: { en: 'Password', es: 'Contrase침a' },
    login_button: { en: 'Enter my Portal', es: 'Entrar a mi Portal' },
    logging_in: { en: 'Logging in...', es: 'Ingresando...' },
    other_options: { en: 'Other options', es: 'Otras opciones' },
    create_account: { en: 'Create Account', es: 'Crear Cuenta' },
    i_am_mechanic: { en: 'I am a Mechanic', es: 'Soy Mec치nico' },
    email_password_incorrect: { en: 'Incorrect email or password', es: 'Email o contrase침a incorrectos' },

    // Settings extras
    workshop_info: { en: 'Workshop Info', es: 'Datos del Taller' },
    address: { en: 'Address', es: 'Direcci칩n' },
    phone: { en: 'Phone', es: 'Tel칠fono' },
    email: { en: 'Email', es: 'Correo Electr칩nico' },
    footer_text: { en: 'Footer Text', es: 'Texto del Pie de P치gina' },
    tax_percentage: { en: 'Tax Percentage (%)', es: 'Porcentaje de Impuesto (%)' },
    income_include_parts: { en: 'Include parts in income stats', es: 'Incluir repuestos en estad칤sticas de ingresos' },
    parts_profit_percentage: { en: 'Default Parts Profit (%)', es: 'Ganancia de repuestos por defecto (%)' },
    messages_enabled: { en: 'Enable automated messages', es: 'Habilitar mensajes autom치ticos' },
    imap_enabled: { en: 'Enable incoming email tracking (IMAP)', es: 'Habilitar seguimiento de emails entrantes (IMAP)' },
    test_connection: { en: 'Test Connection', es: 'Probar Conexi칩n' },
    save_settings: { en: 'Save Settings', es: 'Guardar Ajustes' },
    monday_to_friday: { en: 'Monday to Friday', es: 'Lunes a Viernes' },
    saturday_optional: { en: 'Saturday (Optional)', es: 'S치bado (Opcional)' },
    sunday_optional: { en: 'Sunday (Optional)', es: 'Domingo (Opcional)' },
    saving_text: { en: 'Saving...', es: 'Guardando...' },
    save_all: { en: 'Save All', es: 'Guardar Todo' },
    module_not_enabled: { en: 'Module not enabled', es: 'M칩dulo no habilitado' },
    contact_admin_to_activate: { en: 'Contact the administrator to activate this feature', es: 'Contacta al administrador para activar esta funcionalidad' },
    suppliers_management: { en: 'Suppliers Management', es: 'Gesti칩n de Proveedores' },
    suppliers_description: { en: 'Manage your contact network and consult parts quotes.', es: 'Administr치 tu red de contactos y consult치 presupuestos de repuestos.' },
    new_supplier: { en: 'New Supplier', es: 'Nuevo Proveedor' },
    edit_supplier: { en: 'Edit Supplier', es: 'Editar Proveedor' },
    search_suppliers_placeholder: { en: 'Search by name or email...', es: 'Buscar por nombre o email...' },
    unselect: { en: 'Unselect', es: 'Deseleccionar' },
    consulting_for_order: { en: 'Consulting for Order', es: 'Consultando para Orden' },
    back_to_order: { en: 'Back to Order', es: 'Volver a la Orden' },
    inquiry_detail_hint: { en: 'Suppliers will receive the part details along with the vehicle information to quote.', es: 'Los proveedores recibir치n el detalle del repuesto junto con la informaci칩n del veh칤culo para cotizar.' },
    vehicle_placeholder_inquiry: { en: 'Ex: 2018 Toyota Corolla', es: 'Ej: 2018 Toyota Corolla' },
    part_placeholder_inquiry: { en: 'Ex: Front brake pads set...', es: 'Ej: Juego de pastillas de freno delanteras...' },
    send_inquiry: { en: 'Send Inquiry', es: 'Enviar Consulta' },
    consult: { en: 'Consult', es: 'Consultar' },
    company_name_label: { en: 'Company Name / Contact', es: 'Nombre de la Empresa / Contacto' },
    confirm_delete_supplier: { en: 'Are you sure you want to delete this supplier?', es: '쮼st치s seguro de eliminar este proveedor?' },
    inquiry_sent_success: { en: 'Inquiry sent to {count} suppliers', es: 'Consulta enviada a {count} proveedores' },

    // Settings UI
    settings_panel_title: { en: 'Configuration Panel', es: 'Panel de Configuraci칩n' },
    settings_panel_subtitle: { en: 'Customize all aspects of your workshop system.', es: 'Personaliz치 todos los aspectos de tu sistema taller.' },
    recordatorios_tab: { en: 'REMINDERS', es: 'RECORDATORIOS' },
    templates_tab: { en: 'MESSAGES (TEMPLATES)', es: 'MENSAJES (PLANTILLAS)' },
    auto_sending_title: { en: 'AUTOMATIC SENDING', es: 'ENV칈O AUTOM츼TICO' },
    auto_sending_desc: { en: 'Configure when and how reminders are sent.', es: 'Configura cu치ndo y c칩mo se env칤an los recordatorios.' },
    active_service: { en: 'ACTIVE SERVICE', es: 'SERVICIO ACTIVO' },
    enable_daily_cron: { en: 'ENABLE DAILY CRON', es: 'HABILITA EL CRON DIARIO' },
    sending_time: { en: 'SENDING TIME', es: 'HORA DE ENV칈O' },
    reminders_processing_hint: { en: 'REMINDERS ARE PROCESSED ACCORDING TO THE SCHEDULED DATE IN EACH ORDER. IF THE WORKSHOP IS CONFIGURED NOT TO WORK ON SUNDAYS, THOSE MESSAGES WILL BE SENT THE FOLLOWING MONDAY.', es: 'LOS RECORDATORIOS SE PROCESAN SEG칔N LA FECHA PROGRAMADA EN CADA ORDEN. SI EL TALLER EST츼 CONFIGURADO PARA NO TRABAJAR LOS DOMINGOS, ESOS MENSAJES SE ENVIAR츼N EL SIGUIENTE LUNES.' },
    save_config: { en: 'SAVE CONFIGURATION', es: 'GUARDAR CONFIGURACI칍N' },
    workshop_identity: { en: 'Workshop Identity', es: 'Identidad del Taller' },
    workshop_logo_hint: { en: 'Workshop Logo (Click to change)', es: 'Logo del Taller (Hac칠 clic para cambiar)' },
    upload_logo: { en: 'Upload Official Logo', es: 'Subir Logo Oficial' },
    recommended_size: { en: 'Recommended: 512x512px', es: 'Recomendado: 512x512px' },
    remove_logo: { en: 'Remove Logo', es: 'Quitar Logo' },
    public_link: { en: 'Public Link (Share with Clients)', es: 'Enlace P칰blico (Compartir con Clientes)' },
    copy_link: { en: 'Copy Link', es: 'Copiar Enlace' },
    copied: { en: 'Copied', es: 'Copiado' },
    portal_language_desc: { en: 'This is the language clients will see in the public panel and generated PDFs.', es: 'Este es el idioma en el que los clientes ver치n el panel p칰blico y los PDFs generados.' },
    income_calculation: { en: 'Income Calculation', es: 'C치lculo de Ingresos' },
    add_parts_to_income: { en: 'Add Parts', es: 'Sumar Repuestos' },
    include_parts_desc: { en: 'Include parts in income stats', es: 'Incluye repuestos en ingresos' },
    parts_profit_desc: { en: '* If you don\'t earn 100% of the part cost, lower the number.', es: '* Si no gan치s el 100% de lo que sale el repuesto, baj치 el n칰mero.' },
    contact_and_social: { en: 'Contact & Social media', es: 'Contacto y Redes' },
    whatsapp_hint: { en: 'WhatsApp (Without +)', es: 'WhatsApp (Sin +)' },
    tax_iva: { en: 'IVA / Tax (%)', es: 'IVA (%)' },
    mail_server_config: { en: 'Mail Server Configuration', es: 'Configuraci칩n de Servidor de Correo' },
    traditional_smtp: { en: 'Traditional SMTP', es: 'SMTP Tradicional' },
    auto_reply_reader: { en: 'Automated Response Reader', es: 'Lector de Respuestas autom치ticas' },
    capture_responses_desc: { en: 'Captures replies from clients and suppliers', es: 'Captura respuestas de clientes y proveedores' },
    imap_gmail_tip: { en: '游눠 Tip: If using Gmail, remember to generate an "App Password" so the system can enter without blocks.', es: '游눠 Tip: Si us치s Gmail, record치 generar una "Contrase침a de aplicaci칩n" para que el sistema pueda entrar sin bloqueos.' },
    automated_messages: { en: 'Automated Messages', es: 'Mensajes Autom치ticos' },
    control_auto_sending_desc: { en: 'Control automated sending by status change.', es: 'Control치 el env칤o autom치tico por cambio de estado.' },
    status_enabled: { en: 'Status: Enabled', es: 'Estado: Habilitados' },
    status_disabled: { en: 'Status: Disabled', es: 'Estado: Deshabilitados' },
    messages_config_hint: { en: 'Disabling this will prevent automated messages when changing order status (eg: from Pending to Quoted). This does not affect scheduled maintenance reminders, which have their own configuration one step above.', es: 'Desactivar esta opci칩n evitar치 que se env칤en mensajes autom치ticos cuando cambies el estado de una orden (ej: de Pendiente a Presupuestado). Esto no afecta a los recordatorios de mantenimiento programados, los cuales tienen su propia configuraci칩n un paso m치s arriba.' },
    save_message_adjustment: { en: 'Save Message Adjustment', es: 'Guardar Ajuste de Mensajes' },
    message_templates_title: { en: 'Message Templates', es: 'Plantillas de Mensajes' },
    personalize_templates_desc: { en: 'Personalize the messages sent for each repair status.', es: 'Personaliza los mensajes que se env칤an por cada estado de la reparaci칩n.' },
    new_template: { en: 'New Template', es: 'Nueva Plantilla' },
    trigger: { en: 'Trigger', es: 'Disparador' },
    manual: { en: 'Manual', es: 'Manual' },
    available_tokens: { en: 'Available Tokens', es: 'Tokens Disponibles' },
    insert: { en: 'Insert', es: 'Insertar' },
    token_apodo_desc: { en: 'Uses the nickname or first name.', es: 'Usa el apodo o el primer nombre.' },
    token_cliente_desc: { en: 'Full client name.', es: 'Nombre completo del cliente.' },
    token_vehiculo_desc: { en: 'Brand and model.', es: 'Marca y modelo.' },
    token_turno_desc: { en: 'Date and time of the appointment.', es: 'Fecha y hora del turno.' },
    token_link_desc: { en: 'Tracking link.', es: 'Link de seguimiento.' },
    token_items_desc: { en: 'List of work performed.', es: 'Lista de trabajos realizados.' },
    token_total_desc: { en: 'Order total.', es: 'Total de la orden.' },
    token_usuario_desc: { en: 'Employee or mechanic name.', es: 'Nombre y apellido del empleado o mec치nico.' },
    token_taller_desc: { en: 'Workshop name.', es: 'Nombre del taller.' },
    token_contacto_desc: { en: 'Email, Phone and Address of the workshop.', es: 'Email, Tel y Direcci칩n del taller.' },
    on_create_pending: { en: 'On creation (Pending)', es: 'Al crear (Pendiente)' },
    create_user: { en: 'Create User', es: 'Crear Usuario' },
    username_label: { en: 'Username', es: 'Usuario' },
    password_label: { en: 'Password', es: 'Contrase침a' },
    role_label: { en: 'Role', es: 'Rol' },
    select_role: { en: 'Select Role', es: 'Seleccionar Rol' },
    current_role: { en: 'Current Role', es: 'Rol Actual' },
    audit_editor_title: { en: 'Roles and Permissions Editor', es: 'Editor de Roles y Permisos' },
    new_role: { en: 'New Role', es: 'Nuevo Rol' },
    appearance_desc: { en: 'Choose the visual theme for your workshop. This change will apply to all your users and the Client Portal.', es: 'Eleg칤 el tema visual de tu taller. Este cambio se aplicar치 a todos tus usuarios y al Portal del Cliente.' },
    add_to_catalog: { en: 'Add to Catalog', es: 'Agregar al Cat치logo' },
    load_service: { en: 'Load Service', es: 'Cargar Servicio' },
    service_name: { en: 'Service Name', es: 'Nombre del Servicio' },
    base_price_label: { en: 'Base Price ($)', es: 'Precio Base ($)' },
    service_task: { en: 'Service / Task', es: 'Servicio / Tarea' },
    suggested_labor: { en: 'Suggested Labor', es: 'Mano de Obra Sugerida' },
    no_services_found: { en: 'No services loaded yet.', es: 'No hay servicios cargados a칰n.' },

    // Permissions
    perm_dashboard: { en: 'Dashboard', es: 'Panel Principal' },
    perm_clients: { en: 'Clients', es: 'Clientes' },
    perm_vehicles: { en: 'Vehicles', es: 'Veh칤culos' },
    perm_orders: { en: 'Orders', es: '칍rdenes' },
    perm_income: { en: 'Income / Cash', es: 'Ingresos / Caja' },
    perm_settings: { en: 'Settings', es: 'Ajustes' },
    perm_users: { en: 'Users', es: 'Usuarios' },
    perm_roles: { en: 'Roles', es: 'Roles' },
    perm_reminders: { en: 'Reminders', es: 'Recordatorios' },
    perm_appointments: { en: 'Appointments', es: 'Turnos' },
    perm_suppliers: { en: 'Suppliers', es: 'Proveedores' },
    perm_audit: { en: 'Audit', es: 'Auditor칤a' },

    // Themes
    theme_default_desc: { en: 'Clean and professional', es: 'Limpio y profesional' },
    theme_obsidian_desc: { en: 'Dark and elegant', es: 'Oscuro y elegante' },
    theme_ocean_desc: { en: 'Deep blue, marine', es: 'Azul profundo, marino' },
    theme_sunset_desc: { en: 'Warm and vibrant', es: 'C치lido y vibrante' },
    theme_forest_desc: { en: 'Deep green, dark', es: 'Verde profundo, oscuro' },
    theme_lavender_desc: { en: 'Soft and creative', es: 'Suave y creativo' },
    theme_slate_desc: { en: 'Corporate and modern', es: 'Corporativo y moderno' },

    // Logs & History
    system_history: { en: 'System History', es: 'Historial de Sistema' },
    error_visor_desc: { en: 'Error viewer and technical logs per workshop', es: 'Visor de errores y logs t칠cnicos por taller' },
    purge_old_logs: { en: 'Clear > 1 month', es: 'Limpiar > 1 mes' },
    delete_all: { en: 'Delete All', es: 'Borrar Todo' },
    refresh: { en: 'Refresh', es: 'Refrescar' },
    loading_logs: { en: 'Loading records...', es: 'Cargando registros...' },
    db_logs_title: { en: 'Database Logs', es: 'Logs en Base de Datos' },
    log_level: { en: 'Level', es: 'Nivel' },
    log_message: { en: 'Message', es: 'Mensaje' },
    log_route: { en: 'Route/Method', es: 'Ruta/M칠todo' },
    log_user: { en: 'User', es: 'Usuario' },
    log_date: { en: 'Date', es: 'Fecha' },
    no_db_logs: { en: 'No logs registered in the database', es: 'No hay logs registrados en la base de datos' },
    view_stack_trace: { en: 'View Stack Trace', es: 'Ver Stack Trace' },
    fallback_logs_title: { en: 'Fallback Logs (File) - DB Failures', es: 'Fallback Logs (Archivo) - Fallos de DB' },
    no_file_logs: { en: 'No critical logs registered in the filesystem', es: 'No hay logs cr칤ticos registrados en el sistema de archivos' },

    // Row Actions & General

    role_reserved_hint: { en: 'Reserved by the system (Not editable)', es: 'Reservado por el sistema (No editable)' },
    role_permissions_title: { en: 'Role Permissions', es: 'Permisos del Rol' },
    no_role: { en: 'No Role', es: 'Sin Rol' },

    // Hour Range
    delete_btn: { en: 'Delete', es: 'Eliminar' },
    closed: { en: 'Closed', es: 'Cerrado' },
    from_label: { en: 'From', es: 'Desde' },
    to_label: { en: 'To', es: 'Hasta' },
};

interface LanguageContextType {
    language: Language;
    setLanguage: (lang: Language) => void;
    t: (key: string) => string;
}

const LanguageContext = createContext<LanguageContextType | undefined>(undefined);

export const LanguageProvider = ({ children }: { children: React.ReactNode }) => {
    const [language, setLanguageState] = useState<Language>('es');

    useEffect(() => {
        const savedLang = localStorage.getItem('language') as Language;
        if (savedLang && (savedLang === 'en' || savedLang === 'es')) {
            setLanguageState(savedLang);
        }
    }, []);

    const setLanguage = (lang: Language) => {
        setLanguageState(lang);
        localStorage.setItem('language', lang);
    };

    const t = (key: string): string => {
        if (!key) return '';
        if (!translations[key]) return key;
        return translations[key][language];
    };

    return (
        <LanguageContext.Provider value={{ language, setLanguage, t }}>
            {children}
        </LanguageContext.Provider>
    );
};

export const useTranslation = () => {
    const context = useContext(LanguageContext);
    if (context === undefined) {
        throw new Error('useTranslation must be used within a LanguageProvider');
    }
    return context;
};
